add_namespace = kae_startevent
add_namespace = kae_militiacrisis
###EARLYGAME###

country_event = {
	id = kae_startevent.0
	#immediate = {log = "[GetDateText]: [Root.GetName]: event kae_startevent.0"}
	title = kae_startevent.0.t
	desc = kae_startevent.0.d
	picture = GFX_news_event_chinese_soldiers_march
	is_triggered_only = yes
	major = no
	
	option = {
		name = kae_startevent.0.a
	}
}

country_event = {
	id = kae_startevent.1
	#immediate = {log = "[GetDateText]: [Root.GetName]: event kae_startevent.1"}
	title = kae_startevent.1.t
	desc = kae_startevent.1.d
	picture = GFX_news_event_chinese_soldiers_march
	is_triggered_only = yes
	major = no
	
	option = {
		name = kae_startevent.1.a
		complete_national_focus = KAE_improved_relations
		remove_ideas = KAE_shit_arms_industry
		add_timed_idea = {
			idea = KAE_shit_arms_industry_better
			days = 360
		}
	}
}

country_event = {
	id = kae_startevent.2
	#immediate = {log = "[GetDateText]: [Root.GetName]: event kae_startevent.2"}
	title = kae_startevent.2.t
	desc = kae_startevent.2.d
	picture = GFX_news_event_chinese_soldiers_march
	is_triggered_only = yes
	major = no
	
	option = {
		name = kae_startevent.2.a
	}
}

country_event = {
	id = kae_startevent.5
	#immediate = {log = "[GetDateText]: [Root.GetName]: event kae_startevent.5"}
	title = kae_startevent.5.t
	desc = kae_startevent.5.d
	picture = GFX_news_event_chinese_soldiers_march
	is_triggered_only = yes
	major = no
	
	option = {
		name = kae_startevent.5.a
	}
}

country_event = {
	id = kae_startevent.6
	#immediate = {log = "[GetDateText]: [Root.GetName]: event kae_startevent.6"}
	title = kae_startevent.6.t
	desc = kae_startevent.6.d
	picture = GFX_news_event_chinese_soldiers_march
	fire_only_once = yes
	
	trigger = {
		AND = {
			tag = KAE
			has_war_with = WEI
			WEI = { 
				OR = { 
					surrender_progress > 0.25
					NOT = { country_exists = WEI }
				}
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = kae_startevent.6.a
		add_timed_idea = { idea = KAE_militiasalary days = 180 }
	}
	
	option = {
		name = kae_startevent.6.b
		add_manpower = -7000
		if = {
			limit = {
				NOT = {
					OR = {
						has_country_flag = kae_militiacrisis_flag_1
						has_country_flag = kae_militiacrisis_flag_2
						has_country_flag = kae_militiacrisis_flag_3
					}
				}
			}
			set_country_flag = kae_militiacrisis_flag_1
		}
		if = {
			limit = {
				has_country_flag = kae_militiacrisis_flag_1
			}
			set_country_flag = kae_militiacrisis_flag_2
		}
		if = {
			limit = {
				has_country_flag = kae_militiacrisis_flag_2
			}
			set_country_flag = kae_militiacrisis_flag_3
		}
	}
}

country_event = {
	id = kae_startevent.7
	#immediate = {log = "[GetDateText]: [Root.GetName]: event kae_startevent.7"}
	title = kae_startevent.7.t
	desc = kae_startevent.7.d
	picture = GFX_news_event_chinese_soldiers_march
	fire_only_once = yes
	
	trigger = {
		AND = {
			tag = KAE
			has_war_with = UNU
			UNU = { 
				OR = { 
					surrender_progress > 0.25
					NOT = { country_exists = UNU }
				}
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = kae_startevent.7.a
		add_timed_idea = { idea = KAE_mercenaryunrest days = 365 }
		add_manpower = -5000
	}
	
	option = {
		name = kae_startevent.7.b
	}
}

country_event = {
	id = kae_startevent.8
	#immediate = {log = "[GetDateText]: [Root.GetName]: event kae_startevent.8"}
	title = kae_startevent.8.t
	desc = kae_startevent.8.d
	picture = GFX_news_event_chinese_soldiers_march
	fire_only_once = yes
	
	trigger = {
		AND = {
			tag = KAE
			has_war_with = ASH
			ASH = { 
				OR = { 
					surrender_progress > 0.25
					NOT = { country_exists = ASH }
				}
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = kae_startevent.8.a
		add_manpower = -5000
		add_timed_idea = { idea = KAE_fieldhospitals days = 180 }
	}
	
	option = {
		name = kae_startevent.8.b
		add_manpower = -8000
	}
}

country_event = {
	id = kae_militiacrisis.1
	#immediate = {log = "[GetDateText]: [Root.GetName]: event kae_militiacrisis.1"}
	title = kae_militiacrisis.1.t
	desc = kae_militiacrisis.1.d
	picture = GFX_news_event_chinese_soldiers_march
	fire_only_once = yes
	
	trigger = {
		has_completed_focus = KAE_Claims_Vote
		has_country_flag = kae_militiacrisis_flag_1
		NOT = {
			OR = {
				has_country_flag = kae_militiacrisis_flag_2
				has_country_flag = kae_militiacrisis_flag_3
			}
		}
	}
	
	mean_time_to_happen = {
		days = 14
	}
	
	option = {
		name = kae_militiacrisis.1.a
		add_timed_idea = { idea = KAE_militiaprotest_yes days = 365 }
	}
	
	option = {
		name = kae_militiacrisis.1.b
		add_timed_idea = { idea = KAE_militiaprotest_no days = 180 }
	}
}

country_event = {
	id = kae_militiacrisis.2
	#immediate = {log = "[GetDateText]: [Root.GetName]: event kae_militiacrisis.2"}
	title = kae_militiacrisis.2.t
	desc = kae_militiacrisis.2.d
	picture = GFX_news_event_chinese_soldiers_march
	fire_only_once = yes
	
	trigger = {
		has_completed_focus = KAE_Claims_Vote
		OR = {
			has_country_flag = kae_militiacrisis_flag_2
			has_country_flag = kae_militiacrisis_flag_3
		}
	}
	
	mean_time_to_happen = {
		days = 14
	}
	
	option = {
		name = kae_militiacrisis.2.a
		add_timed_idea = { idea = KAE_militiaprotest_yes days = 365 }
	}
	
	option = {
		name = kae_militiacrisis.2.b
		set_country_flag = kae_militiacrisis_its_happening
		478 = {
			set_demilitarized_zone = yes
		}
		479 = {
			set_demilitarized_zone = yes
		}
		506 = {
			set_demilitarized_zone = yes
		}
		503 = {
			set_demilitarized_zone = yes
		}
		504 = {
			set_demilitarized_zone = yes
		}
		505 = {
			set_demilitarized_zone = yes
		}
		500 = {
			set_demilitarized_zone = yes
		}
		501 = {
			set_demilitarized_zone = yes
		}
		retire_character = KAE_General_2
		retire_character = KAE_General_3
		delete_units = {
			division_template = "Bobyeong-Yeodan"
			disband = no
		}
	}
}

country_event = {
	id = kae_militiacrisis.3
	#immediate = {log = "[GetDateText]: [Root.GetName]: event kae_militiacrisis.3"}
	title = kae_militiacrisis.3.t
	desc = kae_militiacrisis.3.d
	picture = GFX_news_event_chinese_soldiers_march
	fire_only_once = yes
	
	trigger = {
		has_country_flag = kae_militiacrisis_its_happening
	}
	
	mean_time_to_happen = {
		days = 14
	}
	
	option = {
		name = kae_militiacrisis.3.a
		EAK = {            
            transfer_state = 478
            transfer_state = 479
            transfer_state = 503
            transfer_state = 506
            transfer_state = 505
            transfer_state = 504
            transfer_state = 501
            transfer_state = 500
				
            add_state_core = 478
            add_state_core = 479
            add_state_core = 503
            add_state_core = 506
            add_state_core = 505
            add_state_core = 504
            add_state_core = 501
            add_state_core = 500

			add_state_core = 136
            add_state_core = 491
            add_state_core = 492
            add_state_core = 493
            add_state_core = 494
            add_state_core = 495
            add_state_core = 502
			
			478 = {
				set_demilitarized_zone = no
			}
			479 = {
				set_demilitarized_zone = no
			}
			506 = {
				set_demilitarized_zone = no
			}
			503 = {
				set_demilitarized_zone = no
			}
			504 = {
				set_demilitarized_zone = no
			}
			505 = {
				set_demilitarized_zone = no
			}
			500 = {
				set_demilitarized_zone = no
			}
			501 = {
				set_demilitarized_zone = no
			}
			set_capital = { state = 500 }
            inherit_technology = KAE
        }
		EAK = { country_event = { id = kae_militiacrisis.4 days = 3 } }
		KAE = { country_event = { id = kae_militiacrisis.5 days = 3 } }
		KAE = {
			complete_national_focus = KAE_fixing_commandstructures
		}
	}
	
	option = {
		name = kae_militiacrisis.3.b
		EAK = {            
            transfer_state = 478
            transfer_state = 479
            transfer_state = 503
            transfer_state = 506
            transfer_state = 505
            transfer_state = 504
            transfer_state = 501
            transfer_state = 500
				
            add_state_core = 478
            add_state_core = 479
            add_state_core = 503
            add_state_core = 506
            add_state_core = 505
            add_state_core = 504
            add_state_core = 501
            add_state_core = 500
			
			add_state_core = 136
            add_state_core = 491
            add_state_core = 492
            add_state_core = 493
            add_state_core = 494
            add_state_core = 495
            add_state_core = 502
            
			478 = {
				set_demilitarized_zone = no
			}
			479 = {
				set_demilitarized_zone = no
			}
			506 = {
				set_demilitarized_zone = no
			}
			503 = {
				set_demilitarized_zone = no
			}
			504 = {
				set_demilitarized_zone = no
			}
			505 = {
				set_demilitarized_zone = no
			}
			500 = {
				set_demilitarized_zone = no
			}
			501 = {
				set_demilitarized_zone = no
			}
			
			set_capital = { state = 500 }
            inherit_technology = KAE
			change_tag_from = ROOT
        }
		EAK = { country_event = { id = kae_militiacrisis.4 days = 3 } }
		KAE = { country_event = { id = kae_militiacrisis.5 days = 3 } }
		KAE = {
			complete_national_focus = KAE_fixing_commandstructures
		}
	}
}

country_event = {
	id = kae_militiacrisis.4
	#immediate = {log = "[GetDateText]: [Root.GetName]: event kae_militiacrisis.4"}
	title = kae_militiacrisis.4.t
	desc = kae_militiacrisis.4.d
	picture = GFX_news_event_chinese_soldiers_march
	is_triggered_only = yes
	major = no
	
	option = {
		name = kae_militiacrisis.4.a
		load_oob = "KAE_MILITIA_REBEL_ARMY"
		recruit_character = KAE_General_2
		recruit_character = KAE_General_3

	}
}

country_event = {
	id = kae_militiacrisis.5
	#immediate = {log = "[GetDateText]: [Root.GetName]: event kae_militiacrisis.5"}
	title = kae_militiacrisis.5.t
	desc = kae_militiacrisis.5.d
	picture = GFX_news_event_chinese_soldiers_march
	is_triggered_only = yes
	major = no
	
	option = {
		name = kae_militiacrisis.5.a
		swap_ideas = {
			remove_idea = KAE_minutekirin_01
			add_idea = KAE_minutekirin_merc_00
		}
		IF = {
			limit = {
				has_idea = recruit_militia_peacetime
			}
			swap_ideas = {
				remove_idea = recruit_militia_peacetime
				add_idea = recruit_irregular_army
			}
		}			
		IF = {
			limit = {
				has_idea = recruit_militia_wartime
			}
			swap_ideas = {
				remove_idea = recruit_militia_wartime
				add_idea = recruit_irregular_army
			}
		}
		IF = {
			limit = {
				has_idea = recruit_volunteer
			}
			swap_ideas = {
				remove_idea = recruit_volunteer
				add_idea = recruit_irregular_army
			}
		}
		IF = {
			limit = {
				has_idea = recruit_selectivecon
			}
			swap_ideas = {
				remove_idea = recruit_selectivecon
				add_idea = recruit_irregular_army
			}
		}
	}
}
